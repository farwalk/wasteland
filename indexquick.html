<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html>
<head>
<title>Untitled</title>


<script src="js/jquery-1.10.2.min.js"></script>

<script>
 

 
mapsizey = 40;
mapsizex = 40;
playerfacing = 0;
mapx = 42;
mapy = 48;
oldmapx = mapx;
oldmapy = mapy;
oldshipx = mapx;
oldshipy = mapy;
mapmajoroffsetx = 304;
mapmajoroffsety = 418;
 
</script>

<script language=javascript>

function isOdd(num) { return num % 2;}

document.addEventListener('keyup', function(event) {

		oldmapx = mapx;
	  oldmapy = mapy;
		//alert(event.keyCode);

		if (event.keyCode == 82)
		{
		  //r - reveal map
			revealMap();
    }		
		
		if (event.keyCode == 99)
		{
		  //southeast
			goSE();
		}
		if (event.keyCode == 103)
		{
		  //northwest
			goNW();
		}
		if (event.keyCode == 105)
		{
		  //northeast
			goNE();
		}
		if (event.keyCode == 97)
		{
		  //southwest
			goSW();
		}
		if ((event.keyCode == 98) || (event.keyCode == 40))
		{
		  //south
			goS();
		}
		if ((event.keyCode == 104) || (event.keyCode == 38))
		{
		  //north
			goN();
		}
});		



function showDebug()
{
  tvar = "";
	tvar = tvar + "mapx: " + mapx + "<BR>";
	tvar = tvar + "mapy: " + mapy + "<BR>";
	
	xvar = mapy + (mapx * 40);
	tvar = tvar + "tile: " + mapdata[xvar] + "<BR>";
	
	tvar = tvar + "oldshipx: " + oldshipx + "<BR>";
	tvar = tvar + "oldshipy: " + oldshipy + "<BR>";
		
	avar = "maptile"+oldshipy+"-"+oldshipx;
	ax = parseInt(document.getElementById(avar).style.left);
	ay = parseInt(document.getElementById(avar).style.top);
	tvar = tvar + "tilex: " + ax + "<BR>";
	tvar = tvar + "tiley: " + ay + "<BR>";	

	zy = document.getElementById("oldshipsprite").style.top;
	zx = document.getElementById("oldshipsprite").style.left;
	tvar = tvar + "osx: " + zx + "<BR>";
	tvar = tvar + "osy: " + zy + "<BR>";	
	
	tvar = tvar + "<input type='button' onclick=revealMap() value='Reveal Map' ><BR>"
        tvar = tvar + "<input type='button' onclick=drawHexMap() value='hexdraw' ><BR>"
        tvar = tvar + "<input type='button' onclick=goNE() value='go NE' ><BR>zzz"

	
	document.getElementById("debugdiv").innerHTML = tvar;
}


function goNE()
{
  oldmapx = mapx;
	oldmapy = mapy;
  if (isOdd(mapx) == true)
	{
    mapx = mapx + 1;
	  mapy = mapy + 0;																										
	}
	else
	  {
		  mapx = mapx + 1;
			mapy = mapy - 1;				
		}
	playerfacing = 3;
	checkMove();
	moveMap();
	revealFog();
}

function goSE()
{
  oldmapx = mapx;
	oldmapy = mapy;
  if (isOdd(mapx) == true)
	{
	  mapx = mapx + 1;
	  mapy = mapy + 1;																			
	}
	else
	{
	  mapx = mapx + 1;
		mapy = mapy + 0;			
	}
	playerfacing = 1;
	checkMove();
	moveMap();
	revealFog();
}

function goNW()
{
  oldmapx = mapx;
	oldmapy = mapy;
  if (isOdd(mapx) == true)
	{
	  mapx = mapx - 1;
	  mapy = mapy - 0;			  
	}
	else
	  {
		  mapx = mapx - 1;
			mapy = mapy - 1;				
		}
	playerfacing = 2;
	checkMove();
	moveMap();
	revealFog();
}

function goSW()
{
  oldmapx = mapx;
	oldmapy = mapy;
  if (isOdd(mapx) == true)
	{
	  mapx = mapx - 1;
	  mapy = mapy + 1;																			
	}
	else
	  {
		  mapx = mapx - 1;
			mapy = mapy + 0;			
		}
	playerfacing = 0;
	checkMove();
	moveMap();
	revealFog();
}

function goS()
{
  oldmapx = mapx;
	oldmapy = mapy;
  mapx = mapx + 0;
	mapy = mapy + 1;
	playerfacing = 1;
	checkMove();
	moveMap();
	revealFog();
}

function goN()
{
  oldmapx = mapx;
	oldmapy = mapy;
  mapx = mapx + 0;
	mapy = mapy - 1;
	playerfacing = 2;
	checkMove();
	moveMap();
	revealFog();
}

function moveMap()
{
  
	offsetx = mapmajoroffsetx - mapx * 42;
	offsety = mapmajoroffsety - mapy * 48;
	if (isOdd(mapx) == true)
	{
	  offsety = offsety - 24;
	}
	offsetx = offsetx + "px";
	offsety = offsety + "px";
	document.getElementById("mapdiv").style.left = offsetx;
	document.getElementById("mapdiv").style.top = offsety;
}


function checkMove()
{
  //nothing here yet
}

function revealFog()
{
  //nothing here yet
}

function atStart()
{
  
}


</script>

</head>
<body onload=atStart()>


<div id="mapdiv" style="position:absolute; top:0px; left:0px;">

  <img id="mapimage" src="maps/mymap.png" >

</div>

</body>
</html>
